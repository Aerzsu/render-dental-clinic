{% extends 'base.html' %}

{% block title %}{{ product.name }} - Products{% endblock %}

{% block content %}
<div class="min-h-screen bg-gray-50 py-6">
    <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
        <!-- Back Navigation -->
        <nav class="mb-6" aria-label="Breadcrumb">
            <a href="{% url 'services:product_list' %}" 
               class="inline-flex items-center text-sm font-medium text-gray-600 hover:text-gray-900 transition-colors duration-150 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 rounded-md px-2 py-1 -ml-2">
                <svg class="mr-2 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                </svg>
                <span>Back to Products</span>
            </a>
        </nav>

        <!-- Main Content Card -->
        <article class="bg-white shadow-sm rounded-xl overflow-hidden">
            <!-- Header Section -->
            <header class="px-6 py-6 sm:px-8 border-b border-gray-100">
                <div class="flex flex-col lg:flex-row lg:items-start lg:justify-between gap-4">
                    <!-- Title and Status -->
                    <div class="flex-1 min-w-0">
                        <div class="flex flex-wrap items-center gap-3 mb-3">
                            <h1 class="text-3xl font-bold text-gray-900 tracking-tight">{{ product.name }}</h1>
                            {% if product.is_active %}
                                <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800 border border-green-200" role="status" aria-label="Product status: Active">
                                    <svg class="w-3 h-3 mr-1.5" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
                                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                                    </svg>
                                    Active
                                </span>
                            {% else %}
                                <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-gray-100 text-gray-700 border border-gray-200" role="status" aria-label="Product status: Inactive">
                                    <svg class="w-3 h-3 mr-1.5" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
                                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/>
                                    </svg>
                                    Inactive
                                </span>
                            {% endif %}
                        </div>
                        {% if product.description %}
                            <p class="text-base text-gray-600 leading-relaxed max-w-3xl">{{ product.description }}</p>
                        {% endif %}
                    </div>
                    
                    <!-- Action Buttons -->
                    <div class="flex flex-wrap items-center gap-2 lg:ml-6">
                        <a href="{% url 'services:product_update' product.pk %}" 
                           class="inline-flex items-center justify-center px-4 py-2.5 border border-gray-300 text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-all duration-150 shadow-sm"
                           aria-label="Edit product details">
                            <svg class="mr-2 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                            </svg>
                            <span>Edit Product</span>
                        </a>
                        <a href="{% url 'services:product_toggle_active' product.pk %}" 
                           class="inline-flex items-center justify-center px-4 py-2.5 border border-gray-300 text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-all duration-150 shadow-sm"
                           onclick="return confirm('Are you sure you want to {% if product.is_active %}deactivate{% else %}activate{% endif %} this product? {% if product.is_active %}This will make it unavailable for billing.{% endif %}')"
                           aria-label="{% if product.is_active %}Deactivate{% else %}Activate{% endif %} this product">
                            {% if product.is_active %}
                                <svg class="mr-2 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"></path>
                                </svg>
                                <span>Deactivate</span>
                            {% else %}
                                <svg class="mr-2 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                                <span>Activate</span>
                            {% endif %}
                        </a>
                    </div>
                </div>
            </header>

            <!-- Pricing and Category Section -->
            <section class="px-6 py-8 sm:px-8 bg-gradient-to-br from-gray-50 to-white border-b border-gray-100">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <!-- Price Card -->
                    <div class="bg-white rounded-xl p-6 shadow-sm border border-gray-100 hover:shadow-md transition-shadow duration-200">
                        <div class="flex items-start">
                            <div class="flex-shrink-0">
                                <div class="flex items-center justify-center h-12 w-12 rounded-lg bg-primary-100 text-primary-600">
                                    <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"></path>
                                    </svg>
                                </div>
                            </div>
                            <div class="ml-5 w-0 flex-1">
                                <label class="block text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2">
                                    Unit Price
                                </label>
                                <p class="text-3xl font-bold text-gray-900 mb-1">{{ product.price_display }}</p>
                                <p class="text-sm text-gray-600 mt-3">
                                    Price per unit or item
                                </p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Category Card -->
                    <div class="bg-white rounded-xl p-6 shadow-sm border border-gray-100 hover:shadow-md transition-shadow duration-200">
                        <div class="flex items-start">
                            <div class="flex-shrink-0">
                                <div class="flex items-center justify-center h-12 w-12 rounded-lg bg-purple-100 text-purple-600">
                                    <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"></path>
                                    </svg>
                                </div>
                            </div>
                            <div class="ml-5 w-0 flex-1">
                                <label class="block text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2">
                                    Category
                                </label>
                                <p class="text-xl font-bold text-gray-900 mb-1">{{ product.category.name }}</p>
                                {% if product.category.description %}
                                    <p class="text-sm text-gray-600 mt-3">{{ product.category.description }}</p>
                                {% else %}
                                    <a href="{% url 'services:product_list' %}?category={{ product.category.id }}" 
                                       class="inline-flex items-center text-sm text-primary-600 hover:text-primary-700 font-medium mt-3 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 rounded-md">
                                        View all products in this category
                                        <svg class="ml-1 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                        </svg>
                                    </a>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Product Details Section -->
            <section class="px-6 py-8 sm:px-8">
                <h2 class="text-lg font-semibold text-gray-900 mb-6 flex items-center">
                    <svg class="h-5 w-5 mr-2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    Product Information
                </h2>
                <dl class="grid grid-cols-1 sm:grid-cols-2 gap-x-8 gap-y-6">
                    <!-- Availability Status -->
                    <div class="bg-gray-50 rounded-lg p-4 border border-gray-200">
                        <dt class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2">Availability Status</dt>
                        <dd class="flex items-center text-sm font-medium">
                            {% if product.is_active %}
                                <svg class="h-5 w-5 mr-2 text-green-500" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
                                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                                </svg>
                                <span class="text-green-700">Active - Available for billing</span>
                            {% else %}
                                <svg class="h-5 w-5 mr-2 text-gray-400" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
                                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/>
                                </svg>
                                <span class="text-gray-700">Inactive - Not available for billing</span>
                            {% endif %}
                        </dd>
                    </div>
                    
                    <!-- Category Link -->
                    <div class="bg-gray-50 rounded-lg p-4 border border-gray-200">
                        <dt class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2">Product Category</dt>
                        <dd class="flex items-center text-sm font-medium">
                            <svg class="h-5 w-5 mr-2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"></path>
                            </svg>
                            <a href="{% url 'services:product_list' %}?category={{ product.category.id }}" 
                               class="text-primary-600 hover:text-primary-700 hover:underline focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 rounded-md">
                                {{ product.category.name }}
                            </a>
                        </dd>
                    </div>
                    
                    <!-- Created Date -->
                    <div class="bg-gray-50 rounded-lg p-4 border border-gray-200">
                        <dt class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2">Date Created</dt>
                        <dd class="text-sm font-medium text-gray-900">
                            <div class="flex items-center">
                                <svg class="h-5 w-5 mr-2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                </svg>
                                <time datetime="{{ product.created_at|date:'Y-m-d' }}">{{ product.created_at|date:"F d, Y" }}</time>
                            </div>
                            {% if product.created_by %}
                                <p class="text-xs text-gray-500 mt-1.5 ml-7">by {{ product.created_by.full_name }}</p>
                            {% endif %}
                        </dd>
                    </div>
                    
                    <!-- Last Updated -->
                    <div class="bg-gray-50 rounded-lg p-4 border border-gray-200">
                        <dt class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2">Last Updated</dt>
                        <dd class="flex items-center text-sm font-medium text-gray-900">
                            <svg class="h-5 w-5 mr-2 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                            </svg>
                            <time datetime="{{ product.updated_at|date:'Y-m-d' }}">{{ product.updated_at|date:"F d, Y" }}</time>
                        </dd>
                    </div>
                </dl>
            </section>

            <!-- Usage Information Banner -->
            <section class="px-6 py-6 sm:px-8 border-t border-gray-100 bg-gradient-to-br from-blue-50 to-indigo-50">
                <div class="flex items-start">
                    <div class="flex-shrink-0">
                        <div class="flex items-center justify-center h-10 w-10 rounded-lg bg-blue-100">
                            <svg class="h-6 w-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                    <div class="ml-4 flex-1">
                        <h3 class="text-sm font-semibold text-blue-900 mb-2">About Product Usage</h3>
                        <p class="text-sm text-blue-800 leading-relaxed">
                            This product can be added to payment records to track supplies and materials used during dental appointments. Once the product is utilized in billing transactions, usage statistics and detailed history will become available for review and analysis.
                        </p>
                    </div>
                </div>
            </section>
        </article>
    </div>
</div>
{% endblock %}